<!doctype html>
<html class="docs-html">
<head>
  <meta charset="utf-8">
  <title>Create agreement - Documentation Scaffold</title>
    <meta name="description" content="This page shows you how to create an agreement">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Twitter Card data -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Create agreement - Documentation Scaffold">
  <meta name="twitter:description" content="This page shows you how to create an agreement">
  <meta name="twitter:image" content="https://telenorfrontend.github.io/docs.telenordigital.com/img/og_image.jpg">

  <!-- Open Graph data -->
  <meta property="og:title" content="Create agreement - Documentation Scaffold" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://telenorfrontend.github.io/docs.telenordigital.com/payment/agreements/create.html" />
  <meta property="og:image" content="https://telenorfrontend.github.io/docs.telenordigital.com/img/og_image.jpg" />
  <meta property="og:description" content="This page shows you how to create an agreement" />
  <meta property="og:site_name" content="Documentation Scaffold" />

  <link rel="stylesheet" type="text/css" href="/docs.telenordigital.com/style/style.css">
    <link rel="stylesheet" type="text/css" href="/docs.telenordigital.com/script/swagger-ui/swagger-ui-docs-preset.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link id="searchIndex" href="/docs.telenordigital.com/index.json" rel="preload" as="fetch">
</head>
<body class="docs-body">
  <div id="docs-topbar" class="docs-topbar no-print">
    <div id="docs-topbar__inner" class="docs-topbar__inner">
      <a href="#" id="docs-menu-toggle" class="docs-topbar__icon docs-topbar__icon--menu-toggle hidden-desktop"><i class="material-icons md-64">menu</i></a>
      <a href="#" id="docs-search-hide" class="docs-topbar__icon docs-topbar__icon--search-hide hidden-desktop"><i class="material-icons md-64">arrow_back</i></a>
      <div class="docs-topbar__icon docs-topbar__icon--search visible-desktop"><i class="material-icons md-64">search</i></div>
      <input id="docs-search-box" type="text" class="docs-topbar__search-box" placeholder="Search" tabindex="1" autocapitalize="none" autocomplete="off" autocorrect="off" autofocus />
      <a href="#" id="docs-search-close" class="docs-topbar__icon docs-topbar__icon--search-close"><i class="material-icons md-64">close</i></a>
      <a href="#" id="docs-search-show" class="docs-topbar__icon docs-topbar__icon-search-show hidden-desktop"><i class="material-icons md-64">search</i></a>

    </div>
    <div id="docs-search" class="docs-search">
      <ul id="docs-search-results" class="docs-search-results"></ul>
    </div>
  </div>
  <div id="docs-sidebar" class="docs-sidebar visible-desktop no-print">
    <nav class="docs-nav">
      <a class="docs-nav__logo" href="/docs.telenordigital.com/"></a>
        <ul class="docs-nav__ul">
                <li class="docs-nav__li docs-nav__li--group">
                          <a href="/docs.telenordigital.com/payment.html" class="docs-nav__item">Payment</a>
                    <ul class="docs-nav__ul">
                            <li class="docs-nav__li docs-nav__li--subgroup">
                                      <a href="/docs.telenordigital.com/payment/transactions.html" class="docs-nav__item">Transactions</a>
                                <ul class="docs-nav__ul">
                                        <li class="docs-nav__li">
                                                  <a href="/docs.telenordigital.com/payment/transactions/create.html" class="docs-nav__item">Create transaction</a>
                                        </li>
                                        <li class="docs-nav__li">
                                                  <a href="/docs.telenordigital.com/payment/transactions/view.html" class="docs-nav__item">View transaction</a>
                                        </li>
                                        <li class="docs-nav__li">
                                                  <a href="/docs.telenordigital.com/payment/transactions/refund.html" class="docs-nav__item">Refund transaction</a>
                                        </li>
                                </ul>
                            </li>
                            <li class="docs-nav__li docs-nav__li--subgroup">
                                      <a href="/docs.telenordigital.com/payment/agreements.html" class="docs-nav__item">Agreements</a>
                                <ul class="docs-nav__ul">
                                        <li class="docs-nav__li">
                                                  <a href="/docs.telenordigital.com/payment/agreements/create.html" class="docs-nav__item">Create agreement</a>
                                        </li>
                                        <li class="docs-nav__li">
                                                  <a href="/docs.telenordigital.com/payment/agreements/view.html" class="docs-nav__item">View agreement</a>
                                        </li>
                                        <li class="docs-nav__li">
                                                  <a href="/docs.telenordigital.com/payment/agreements/stop.html" class="docs-nav__item">Stop agreement</a>
                                        </li>
                                </ul>
                            </li>
                            <li class="docs-nav__li">
                                      <a href="/docs.telenordigital.com/payment/api-documentation.html" class="docs-nav__item">Full API documentation</a>
                            </li>
                            <li class="docs-nav__li docs-nav__li--subgroup">
                                      <a href="/docs.telenordigital.com/payment/faq.html" class="docs-nav__item">FAQ</a>
                                <ul class="docs-nav__ul">
                                        <li class="docs-nav__li">
                                                  <a href="/docs.telenordigital.com/payment/faq/connect-id.html" class="docs-nav__item">Connect ID and Connect Payment</a>
                                        </li>
                                        <li class="docs-nav__li">
                                                  <a href="/docs.telenordigital.com/payment/faq/gethelp.html" class="docs-nav__item">Get support!</a>
                                        </li>
                                        <li class="docs-nav__li">
                                                  <a href="/docs.telenordigital.com/payment/faq/onboarding.html" class="docs-nav__item">Onboarding</a>
                                        </li>
                                </ul>
                            </li>
                    </ul>
                </li>
        </ul>
        <div class="docs-sidebar__menuLinks hidden-desktop">
          <hr class="docs-nav__hr" />
          <ul class="docs-nav__ul">
          </ul>
        </div>
    </nav>
  </div>
  <div id="barba-wrapper" class="docs-wrapper">
    <div class="docs-content barba-container">
      <h1>Create agreement</h1>
        <ol class="docs-breadcrumbs tn-breadcrumbs visible-desktop">
                <li class="tn-breadcrumb">
                    <a href="/docs.telenordigital.com/">Home</a>
                </li>
              <li class="tn-breadcrumb">
                      <a href="/docs.telenordigital.com/payment.html">Payment</a>
              </li>
              <li class="tn-breadcrumb">
                      <a href="/docs.telenordigital.com/payment/agreements.html">Agreements</a>
              </li>
            <li class="tn-breadcrumb tn-breadcrumb--active">Create agreement</li>
        </ol>
      <h2 id="creating-an-agreement">Creating an agreement</h2>
<p>Subscriptions are called <strong>charging agreements</strong> in our APIs.
To create a charging agreement you need to send us the agreement information
as a JSON object. To identify yourself you need to supply an api key. Here
is an example using <a href="https://en.m.wikipedia.org/wiki/CURL#cURL">curl</a>:</p>
<pre><code class="hljs bash">curl --request <span class="hljs-string">'POST'</span> \
     --url <span class="hljs-string">'https://staging.payment.telenordigital.com/agreements'</span> \
     --header <span class="hljs-string">'content-type: application/json'</span> \
     --header <span class="hljs-string">'accept: application/json'</span> \
     --user <span class="hljs-string">'your-api-key'</span> \
     --data <span class="hljs-string">'{
                "connectId": "subscription-owner-id",
                "recurrenceTimeSpec": "R//P1M",
                "trial.period": "false",
                "verificationTransaction": "{
                    "orderId": "your-order-id",
                    "purchaseDescription": "Your purchase description",
                    "amount": "MMK 1500",
                    "successRedirect": "http://example.com?success",
                    "cancelRedirect": "http://example.com?aborted"
                }"
             }'</span></code></pre>

<p>When you run this code, we will respond with a json-object which
contains a (among other things)  <code>links</code> property.
You should redirect your users to the link with <code>rel: PAYMENT</code>
within this property, and we will handle the rest.</p>
<h3 id="explanation">Explanation</h3>
<p>Creating an agreement is very similar to creating a transaction (see previous example), but
we need to supply a different data-structure with some additional information:</p>
<ul>
<li><code>recurrenceTimeSpec</code> - <a href="https://en.m.wikipedia.org/wiki/ISO_8601">ISO 8601</a>
 time-spec for how often charging should occur (<code>R//P1M</code> = monthly)</li>
<li><code>trial.period</code> (optional) - <a href="https://en.m.wikipedia.org/wiki/ISO_8601">ISO 8601</a> duration
 of trial period. If you don’t include it, user will not receive a free trial. If you include it,
 specify a single duration, ex: <code>1PM</code> means 1 month free trial.</li>
<li><code>verificationTransaction</code> - a transaction object, similar
 to the one from the transaction example. This will be the base-transaction for
 all further transactions in this subscription.</li>
</ul>
<p>When setting up real agreements in production, the url should be
<code>https://payment.telenordigital.com/agreements</code> (without the <code>staging</code>)</p>
<p>For a more details, please use the
<a href="http://docs.telenordigital.com/apis/connect/payment/#recurring-payment-charging-agreement-post">docs</a>.</p>

        <a class="docs-edit-btn no-print" href="https://github.com/TelenorFrontend/docs.telenordigital.com/edit/master/docs/payment/agreements/create.md" target="_blank">Edit this page</a>
    </div>
  </div>
    <script src="/docs.telenordigital.com/script/swagger-ui/swagger-ui-bundle.js" ></script>
    <script src="/docs.telenordigital.com/script/swagger-ui/swagger-ui-docs-preset.js" ></script>
  <script src="/docs.telenordigital.com/script/vendor.js" ></script>
  <script src="/docs.telenordigital.com/script/script.js" ></script>
</body>
</html>
